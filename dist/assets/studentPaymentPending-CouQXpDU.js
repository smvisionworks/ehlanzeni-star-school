import{a,d as m}from"./firebase-B3bAttLw.js";import{onAuthStateChanged as l,signOut as c}from"https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";import{ref as s,get as g}from"https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";import"https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";import"https://www.gstatic.com/firebasejs/10.12.0/firebase-storage.js";document.addEventListener("DOMContentLoaded",()=>{l(a,async n=>{if(!n){window.location.href="../landing/login.html";return}try{const e=s(m,`application/pending/${n.uid}`),o=await g(e);if(o.exists()){const t=o.val();if(document.getElementById("student-name").textContent=`${t.firstName} ${t.lastName}`,document.getElementById("student-code").textContent=t.studentCode||"N/A",t.monthlyPayment&&t.monthlyPayment.month){const[r,i]=t.monthlyPayment.month.split("-"),d=new Date(r,parseInt(i)-1).toLocaleString("en-ZA",{month:"long",year:"numeric"});document.getElementById("current-month").textContent=d}else document.getElementById("current-month").textContent="Current Month"}}catch(e){console.error("Error loading student data:",e)}})});window.logout=async function(){try{await c(a),window.location.href="../landing/login.html"}catch(n){console.error("Logout error:",n),alert("Error logging out. Please try again.")}};window.refreshPage=function(){location.reload()};
