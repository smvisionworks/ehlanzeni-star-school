import{a as T,d as q}from"./firebase-B3bAttLw.js";import{createUserWithEmailAndPassword as O}from"https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";import{ref as Q,set as Y}from"https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";import"https://www.gstatic.com/firebasejs/10.12.0/firebase-storage.js";import"https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";document.getElementById("teacherForm").addEventListener("submit",async a=>{a.preventDefault();const e=a.target.querySelector('button[type="submit"]'),t=e.textContent;e.disabled=!0,e.textContent="Submitting...";try{const o=document.getElementById("firstName").value,m=document.getElementById("lastName").value,g=document.getElementById("idNumber").value,y=document.getElementById("race").value,l=document.getElementById("email").value,v=document.getElementById("phone").value,r=document.getElementById("password").value,h=document.getElementById("confirmPassword").value,p=document.getElementById("addressLine1").value,f=document.getElementById("addressLine2").value,E=document.getElementById("city").value,I=document.getElementById("province").value,B=document.getElementById("postalCode").value,b=document.getElementById("country").value,w=document.getElementById("highestQualification").value,S=document.getElementById("fieldOfStudy").value,x=document.getElementById("yearsExperience").value,C=document.querySelectorAll(".subject-checkbox:checked"),s=Array.from(C).map(n=>n.value),d=document.getElementById("additionalSubjects").value;if(d){const n=d.split(",").map(c=>c.trim()).filter(c=>c);s.push(...n)}const N=document.querySelectorAll('input[name="teachingLevel"]:checked'),i=Array.from(N).map(n=>n.value),D=document.getElementById("preferredSchedule").value,L=document.getElementById("availableStartDate").value,j=document.getElementById("declarationName").value,k=document.getElementById("declarationDate").value;if(r!==h)throw new Error("Passwords do not match");if(s.length===0)throw new Error("Please select at least one subject");if(i.length===0)throw new Error("Please select at least one teaching level");const P=(await O(T,l,r)).user,A={personalInfo:{firstName:o,lastName:m,idNumber:g,race:y,email:l,phone:v,address:{line1:p,line2:f,city:E,province:I,postalCode:B,country:b}},teachingInfo:{highestQualification:w,fieldOfStudy:S,yearsExperience:x,subjects:s,teachingLevels:i},availability:{preferredSchedule:D,availableStartDate:L},declaration:{name:j,date:k},registrationDate:new Date().toISOString(),status:"pending",role:"teacher"},R=Q(q,`teachers/${P.uid}`);await Y(R,A),u("Registration successful! Your application is pending admin approval. You will be notified once approved.","success"),setTimeout(()=>{window.location.href="../landing/login.html"},2e3)}catch(o){console.error("Registration error:",o),u("Registration failed: "+o.message,"error"),e.disabled=!1,e.textContent=t}});function u(a,e="info"){const t=document.getElementById("toast");t.textContent=a,t.className="toast "+e,t.style.display="block",setTimeout(()=>{t.style.display="none"},5e3)}
